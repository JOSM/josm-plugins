<project name="utilsplugin" default="build" basedir=".">
  <property name="josm" location="../../core/dist/josm-custom.jar" />
  
  <target name="init">
    <mkdir dir="build"/>
  </target>

  <target name="compile" depends="init">
    <javac srcdir="src" classpath="${josm}" destdir="build" debug="true"/>
  </target>

  <target name="build" depends="clean, compile">
    <copy todir="build/images">
      <fileset dir="images"/>
    </copy>
    <jar destfile="utilsplugin.jar" basedir="build">
      <manifest>
	<attribute name="Plugin-Class" value="UtilsPlugin.UtilsPlugin"/>
	<attribute name="Plugin-Description" value="Useful JOSM utilities"/>
	<attribute name="Plugin-Version" value="0.5"/>
	<attribute name="Author"
		   value="(originally) Martijn van Oosterhout &gt;kleptog@svana.org&gt;"/>
      </manifest>
    </jar>
  </target>

  <target name="clean">
    <delete dir="build" />
  </target>

  <target name="install" depends="build">
    <copy file="utilsplugin.jar" todir="${user.home}/.josm/plugins"/>
  </target>
</project>
